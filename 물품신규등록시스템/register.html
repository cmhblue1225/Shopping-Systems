<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‹ ê·œìƒí’ˆë“±ë¡ ë° ì—‘ì…€ ì¶œë ¥</title>
  
  <!-- ë¡œì»¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <!-- jQuery -->
  <script src="assets/js/libs/jquery-3.6.0.min.js"></script>
  <!-- jSignature for signature capture -->
  <script src="assets/js/libs/jSignature.min.js"></script>
  <!-- ExcelJS -->
  <script src="assets/js/libs/exceljs.min.js"></script>
  <!-- FileSaver.js for saving files -->
  <script src="assets/js/libs/FileSaver.min.js"></script>
  
  <!-- ë¡œì»¬ ìŠ¤íƒ€ì¼ì‹œíŠ¸ -->
  <link rel="stylesheet" href="assets/css/styles.css">
  
  <!-- ìƒ˜í”Œ ì…ë ¥ ìŠ¤íƒ€ì¼ -->
  <style>
    .sample-input {
      color: #6c757d;
      font-style: italic;
    }
    
    .sample-input.has-input {
      color: #495057;
      font-style: normal;
    }
    
    /* í˜„ì¬ ë‚ ì§œ ì„¤ì • */
    #reqDate {
      background: #f8f9fa;
    }
  </style>
</head>

<body>
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav style="background: linear-gradient(45deg, #667eea, #764ba2); padding: 15px; margin: -20px -20px 20px -20px; border-radius: 0 0 15px 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <div style="display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto;">
      <h1 style="color: white; margin: 0; font-size: 24px;">ë¬¼í’ˆì‹ ê·œë“±ë¡</h1>
      <div style="display: flex; gap: 15px;">
        <a href="index.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255,255,255,0.2); border-radius: 20px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">ğŸ  ë©”ì¸</a>
        <a href="search.html" style="color: white; text-decoration: none; padding: 8px 16px; background: rgba(255,255,255,0.2); border-radius: 20px; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">ğŸ” ì¡°íšŒ</a>
      </div>
    </div>
  </nav>

  <div class="title">ì‹ ê·œìƒí’ˆë“±ë¡</div>

  <form id="inForm" onsubmit="return false;">
    <!-- ê¸°ë³¸ ì •ë³´ í…Œì´ë¸” -->
    <table>
      <tr>
        <th>ë“±ë¡ì¼ì</th>
        <td><input type="date" id="reqDate"></td>
        <th>ë“±ë¡ë²ˆí˜¸</th>
        <td><input type="text" id="reqNo" placeholder="ë“±ë¡ë²ˆí˜¸"></td>
        <th>ë“±ë¡ì</th>
        <td><input type="text" id="reqUser" placeholder="ë“±ë¡ìëª…"></td>
      </tr>
      <tr>
        <th>ì°¸ì¡°ë¶€ì„œ</th>
        <td colspan="7">
          <div id="refDeptWrap" class="ref-dept-wrap">
            <input type="text" class="ref-dept-input" name="refDept" placeholder="ì°¸ì¡°ë¶€ì„œ">
          </div>
          <button type="button" class="add-btn" onclick="addRefDept()">ï¼‹</button>
        </td>
      </tr>
    </table>

    <!-- í’ˆëª© í…Œì´ë¸” -->
    <table id="itemTable">
      <tr>
        <th>ìˆœë²ˆ</th>
        <th>ìƒí’ˆì½”ë“œ</th>
        <th>í’ˆëª…</th>
        <th>ê·œê²©</th>
        <th>ë‹¨ìœ„</th>
        <th>ìˆ˜ëŸ‰</th>
        <th>ë‹¨ê°€</th>
        <th>ê¸ˆì•¡</th>
        <th>ê±°ë˜ì²˜</th>
        <th>ì¹´í…Œê³ ë¦¬</th>
        <th>ì…ê³  ì°½ê³ </th>
        <th>ë¹„ê³ </th>
      </tr>
      
      <!-- ìƒ˜í”Œ í’ˆëª© ë°ì´í„° (1í–‰) -->
      <tr>
        <td>1</td>
        <td><input type="text" id="code0" placeholder="P001" class="sample-input" data-sample="P001"></td>
        <td><input type="text" id="item0" placeholder="A4 íŠ¹ìˆ˜ìš©ì§€" class="sample-input" data-sample="A4 íŠ¹ìˆ˜ìš©ì§€"></td>
        <td><input type="text" id="spec0" placeholder="80g, 500ë§¤" class="sample-input" data-sample="80g, 500ë§¤"></td>
        <td><input type="text" id="unit0" placeholder="ë°•ìŠ¤" class="sample-input" data-sample="ë°•ìŠ¤"></td>
        <td><input type="number" id="qty0" placeholder="10" class="sample-input" data-sample="10"></td>
        <td><input type="number" id="price0" placeholder="4000" class="sample-input" data-sample="4000"></td>
        <td><input type="number" id="amount0" placeholder="40000" readonly></td>
        <td><input type="text" id="vendor0" placeholder="(ì£¼)ì—”ì¼€ì´" class="sample-input" data-sample="(ì£¼)ì—”ì¼€ì´"></td>
        <td><input type="text" id="cat0" placeholder="ë¬¸êµ¬/ì‚¬ë¬´ìš©í’ˆ" class="sample-input" data-sample="ë¬¸êµ¬/ì‚¬ë¬´ìš©í’ˆ"></td>
        <td><input type="text" id="wh0" placeholder="ë³¸ì‚¬ ì°½ê³ " class="sample-input" data-sample="ë³¸ì‚¬ ì°½ê³ "></td>
        <td><input type="text" id="note0" placeholder="ì¼ë°˜ìš©" class="sample-input" data-sample="ì¼ë°˜ìš©"></td>
      </tr>
      
      <!-- ì¶”ê°€ ë¹ˆ í’ˆëª© í–‰ë“¤ -->
      <tr><td>2</td><td><input type="text" id="code1"></td><td><input type="text" id="item1"></td><td><input type="text" id="spec1"></td><td><input type="text" id="unit1"></td><td><input type="number" id="qty1"></td><td><input type="number" id="price1"></td><td><input type="number" id="amount1" readonly></td><td><input type="text" id="vendor1"></td><td><input type="text" id="cat1"></td><td><input type="text" id="wh1"></td><td><input type="text" id="note1"></td></tr>
      <tr><td>3</td><td><input type="text" id="code2"></td><td><input type="text" id="item2"></td><td><input type="text" id="spec2"></td><td><input type="text" id="unit2"></td><td><input type="number" id="qty2"></td><td><input type="number" id="price2"></td><td><input type="number" id="amount2" readonly></td><td><input type="text" id="vendor2"></td><td><input type="text" id="cat2"></td><td><input type="text" id="wh2"></td><td><input type="text" id="note2"></td></tr>
      <tr><td>4</td><td><input type="text" id="code3"></td><td><input type="text" id="item3"></td><td><input type="text" id="spec3"></td><td><input type="text" id="unit3"></td><td><input type="number" id="qty3"></td><td><input type="number" id="price3"></td><td><input type="number" id="amount3" readonly></td><td><input type="text" id="vendor3"></td><td><input type="text" id="cat3"></td><td><input type="text" id="wh3"></td><td><input type="text" id="note3"></td></tr>
      <tr><td>5</td><td><input type="text" id="code4"></td><td><input type="text" id="item4"></td><td><input type="text" id="spec4"></td><td><input type="text" id="unit4"></td><td><input type="number" id="qty4"></td><td><input type="number" id="price4"></td><td><input type="number" id="amount4" readonly></td><td><input type="text" id="vendor4"></td><td><input type="text" id="cat4"></td><td><input type="text" id="wh4"></td><td><input type="text" id="note4"></td></tr>
      <tr><td>6</td><td><input type="text" id="code5"></td><td><input type="text" id="item5"></td><td><input type="text" id="spec5"></td><td><input type="text" id="unit5"></td><td><input type="number" id="qty5"></td><td><input type="number" id="price5"></td><td><input type="number" id="amount5" readonly></td><td><input type="text" id="vendor5"></td><td><input type="text" id="cat5"></td><td><input type="text" id="wh5"></td><td><input type="text" id="note5"></td></tr>
      <tr><td>7</td><td><input type="text" id="code6"></td><td><input type="text" id="item6"></td><td><input type="text" id="spec6"></td><td><input type="text" id="unit6"></td><td><input type="number" id="qty6"></td><td><input type="number" id="price6"></td><td><input type="number" id="amount6" readonly></td><td><input type="text" id="vendor6"></td><td><input type="text" id="cat6"></td><td><input type="text" id="wh6"></td><td><input type="text" id="note6"></td></tr>
      <tr><td>8</td><td><input type="text" id="code7"></td><td><input type="text" id="item7"></td><td><input type="text" id="spec7"></td><td><input type="text" id="unit7"></td><td><input type="number" id="qty7"></td><td><input type="number" id="price7"></td><td><input type="number" id="amount7" readonly></td><td><input type="text" id="vendor7"></td><td><input type="text" id="cat7"></td><td><input type="text" id="wh7"></td><td><input type="text" id="note7"></td></tr>
      <tr><td>9</td><td><input type="text" id="code8"></td><td><input type="text" id="item8"></td><td><input type="text" id="spec8"></td><td><input type="text" id="unit8"></td><td><input type="number" id="qty8"></td><td><input type="number" id="price8"></td><td><input type="number" id="amount8" readonly></td><td><input type="text" id="vendor8"></td><td><input type="text" id="cat8"></td><td><input type="text" id="wh8"></td><td><input type="text" id="note8"></td></tr>
      <tr><td>10</td><td><input type="text" id="code9"></td><td><input type="text" id="item9"></td><td><input type="text" id="spec9"></td><td><input type="text" id="unit9"></td><td><input type="number" id="qty9"></td><td><input type="number" id="price9"></td><td><input type="number" id="amount9" readonly></td><td><input type="text" id="vendor9"></td><td><input type="text" id="cat9"></td><td><input type="text" id="wh9"></td><td><input type="text" id="note9"></td></tr>

      <!-- í•©ê³„ í–‰ -->
      <tr>
        <td colspan="7" class="bold" style="text-align:right;">í•©ê³„</td>
        <td class="bold"><input type="number" id="total" value="0" readonly></td>
        <td colspan="5"></td>
      </tr>
    </table>

    <!-- ë¹„ê³  í…Œì´ë¸” -->
    <table>
      <tr>
        <th>ë¹„ê³ </th>
        <td colspan="10">
          <textarea id="remark" placeholder="ë¹„ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
        </td>
      </tr>
    </table>

    <!-- ê±°ë˜ì²˜ ì •ë³´ í…Œì´ë¸” -->
    <table>
      <tr>
        <th>ì‹ ê·œë“±ë¡ ë‹´ë‹¹ì</th>
        <td><input type="text" id="manager" placeholder="ë‹´ë‹¹ìëª…"></td>
        <th>ì‹ ê·œë“±ë¡ ë‹´ë‹¹ì ì—°ë½ì²˜</th>
        <td><input type="text" id="contact" placeholder="ì—°ë½ì²˜"></td>
        <th>ì‹ ê·œë“±ë¡ ë‹´ë‹¹ì ì´ë©”ì¼</th>
        <td><input type="email" id="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œ"></td>
      </tr>
    </table>

    <!-- ì„œëª… í…Œì´ë¸” -->
    <table>
      <tr>
        <th>ë“±ë¡ì ì„œëª…</th>
        <td class="signature">
          <div class="signature-pad-wrap">
            <div id="signature-request" class="signature-pad"></div>
            <button type="button" class="clear-signature" id="clear-signature-request">ì§€ìš°ê¸°</button>
          </div>
        </td>
        <th>ê²€í† ì ì„œëª…</th>
        <td class="signature">
          <div class="signature-pad-wrap">
            <div id="signature-review" class="signature-pad"></div>
            <button type="button" class="clear-signature" id="clear-signature-review">ì§€ìš°ê¸°</button>
          </div>
        </td>
        <th>ìŠ¹ì¸ì ì„œëª…</th>
        <td class="signature">
          <div class="signature-pad-wrap">
            <div id="signature-approve" class="signature-pad"></div>
            <button type="button" class="clear-signature" id="clear-signature-approve">ì§€ìš°ê¸°</button>
          </div>
        </td>
      </tr>
    </table>

    <br>

    <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
    <button type="button" onclick="downloadExcel()">ì—‘ì…€ë¡œ ì¶œë ¥</button>
    <button type="button" onclick="printDocument()">ì¸ì‡„í•˜ê¸°</button>
    <button type="button" onclick="showSaveDialog()">ğŸ’¾ ì €ì¥</button>
    <button type="button" onclick="showLoadDialog()">ğŸ“‚ ë¶ˆëŸ¬ì˜¤ê¸°</button>
  </form>

  <!-- ì €ì¥ ë‹¤ì´ì–¼ë¡œê·¸ -->
  <div id="saveDialog" class="dialog-overlay" style="display: none;">
    <div class="dialog">
      <h3>ğŸ’¾ ë°ì´í„° ì €ì¥</h3>
      <div class="form-group">
        <label>ì €ì¥í•  ì´ë¦„:</label>
        <input type="text" id="saveNameInput" placeholder="ì˜ˆ: ì…ê³ ìš”ì²­ì„œ_20241226">
      </div>
      <div class="dialog-buttons">
        <button onclick="saveData()">ì €ì¥</button>
        <button onclick="closeSaveDialog()">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- ë¶ˆëŸ¬ì˜¤ê¸° ë‹¤ì´ì–¼ë¡œê·¸ -->
  <div id="loadDialog" class="dialog-overlay" style="display: none;">
    <div class="dialog">
      <h3>ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</h3>
      <div class="saved-list" id="savedDataList">
        <!-- ì €ì¥ëœ ë°ì´í„° ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
      </div>
      <div class="dialog-buttons">
        <button onclick="closeLoadDialog()">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- ìƒ˜í”Œ ë°ì´í„° ì²˜ë¦¬ ë° í˜„ì¬ ë‚ ì§œ ì„¤ì • -->
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‚ ì§œ ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
      // í˜„ì¬ ë‚ ì§œ ìë™ ì„¤ì •
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('reqDate').value = today;
      
      // ìƒ˜í”Œ ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
      const sampleInputs = document.querySelectorAll('.sample-input');
      
      sampleInputs.forEach(input => {
        // í¬ì»¤ìŠ¤ ì‹œ ìƒ˜í”Œ ë°ì´í„° ì„¤ì •
        input.addEventListener('focus', function() {
          if (!this.value && this.dataset.sample) {
            this.value = this.dataset.sample;
            this.select(); // ì „ì²´ í…ìŠ¤íŠ¸ ì„ íƒ
          }
        });
        
        // ì…ë ¥ ì‹œ ìŠ¤íƒ€ì¼ ë³€ê²½
        input.addEventListener('input', function() {
          if (this.value) {
            this.classList.add('has-input');
          } else {
            this.classList.remove('has-input');
          }
        });
        
        // ë¸”ëŸ¬ ì‹œ ë¹ˆ ê°’ì´ë©´ ì›ë˜ ìƒíƒœë¡œ
        input.addEventListener('blur', function() {
          if (!this.value.trim()) {
            this.value = '';
            this.classList.remove('has-input');
          }
        });
      });
    });
  </script>
  
  <!-- ë©”ì¸ JavaScript íŒŒì¼ -->
  <script src="assets/js/main.js"></script>
</body>

</html>